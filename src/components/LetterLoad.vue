<template lang="html">
  <section class="letter-load">
    <v-card flat>
      <div v-show="isSubmitted">
        <v-card-subtitle align="left">
          <div class="text-left">
            {{ currentDate() }}
          </div>
          <div>{{ selectedRep.name }}</div>
          <div>{{ selectedRep.address_line1 }}</div>
          <div>
            {{ selectedRep.address_city }}, {{ selectedRep.address_state }},
            {{ selectedRep.address_zip }}
          </div>
          <br />
          <div>Your Name</div>
          <div>Address</div>
          <div>City, S.C. Zip Code</div>
        </v-card-subtitle>
        <v-card-title> {{ selectedRep.name }} </v-card-title>

        <v-card-text>
          <span v-html="letterBody" />
        </v-card-text>

        <v-textarea
          filled
          auto-grow
          placeholder="Additional message (optional)"
          v-model="persistCustomization"
        ></v-textarea>
      </div>
      <div v-show="!isSubmitted">
        <v-card-text> clicked</v-card-text>

        <div class="col-md text-center text-md-left">
          <!--<h2>You are logged in as {{ $auth.user.name }}</h2>
                    { JSON.stringify($auth.user, null, 2) }} -->
        </div>
      </div>

      <v-card-actions class="justify-center">
        <v-btn>
          <AuthNav />
        </v-btn>
      </v-card-actions>
    </v-card>
  </section>
</template>

<script lang="js">
import AuthNav from '@/components/AuthNav'

export default {
  name: 'LetterLoad',
  components: { AuthNav },
  props: {
    repName: { type: String, default: '' },
    letterBody: { type: String, default: '' },
    selectedRep: { type: Object, default: new Object() }
  },
  data () {
    return {
      date: new Date().toLocaleString(),
      isSubmitted: true,
      additionalMessage: ""
    }
  },
  computed: {
    persistCustomization : {
      get: function(){
        return this.additionalMessage
      },
      set: function(newValue){
         this.additionalMessage = newValue;
         this.$store.commit('setGenericValue', { key: 'userCustomization', value: newValue })
      }
    }
  },

  mounted () {

  },
  methods: {
    currentDate () {
      const current = new Date()
      const date = `${current.getDate()}/${current.getMonth() + 1}/${current.getFullYear()}`;
      return date
    }

 },

}
</script>

<style scoped lang="less">
.letter-load {
}
</style>
